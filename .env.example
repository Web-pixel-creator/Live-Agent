# Shared
NODE_ENV=development
GOOGLE_CLOUD_PROJECT=your-gcp-project
GOOGLE_CLOUD_REGION=us-central1
# Optional runtime identity hints (Cloud Run service account emails)
GCP_GATEWAY_SERVICE_ACCOUNT=
GCP_API_SERVICE_ACCOUNT=
GCP_ORCHESTRATOR_SERVICE_ACCOUNT=

# Telemetry storage split (T-221):
# - service metrics -> Cloud Monitoring (via structured analytics logs + log routing)
# - heavy event analytics -> BigQuery (via structured analytics logs + log routing)
ANALYTICS_EXPORT_ENABLED=false
ANALYTICS_EXPORT_METRICS_TARGET=cloud_monitoring
ANALYTICS_EXPORT_EVENTS_TARGET=bigquery
ANALYTICS_EXPORT_SAMPLE_RATE=1
ANALYTICS_BIGQUERY_DATASET=agent_analytics
ANALYTICS_BIGQUERY_TABLE=event_rollups
ANALYTICS_LOG_NAME=multimodal_analytics

# Gateway
GATEWAY_PORT=8080
# MVP baseline transport is websocket; webrtc remains V2 spike behind flag.
GATEWAY_TRANSPORT_MODE=websocket
# V2 WebRTC rollout governance (status telemetry only; no MVP transport switch).
GATEWAY_WEBRTC_ROLLOUT_STAGE=spike
GATEWAY_WEBRTC_CANARY_PERCENT=0
GATEWAY_WEBRTC_ROLLBACK_READY=true
ORCHESTRATOR_URL=http://localhost:8082/orchestrate
LIVE_API_ENABLED=false
LIVE_API_WS_URL=
LIVE_API_API_KEY=
# Optional extra header format: "Header-Name: value"
LIVE_API_AUTH_HEADER=
LIVE_API_PROTOCOL=gemini
LIVE_API_AUTO_SETUP=true
LIVE_AUDIO_MIME_TYPE=audio/pcm;rate=16000
LIVE_VIDEO_MIME_TYPE=image/jpeg
LIVE_CONNECT_RETRY_MS=500
LIVE_CONNECT_MAX_ATTEMPTS=2
LIVE_MAX_STALE_CHUNK_MS=2500
# Optional JSON object merged into Gemini setup payload (e.g., tools/toolConfig overrides)
LIVE_SETUP_PATCH_JSON=

# API Backend
API_PORT=8081
API_ORCHESTRATOR_URL=http://localhost:8082/orchestrate
OPERATOR_DEVICE_NODE_SUMMARY_LIMIT=200
OPERATOR_DEVICE_NODE_STALE_THRESHOLD_MS=300000

# UI Executor (remote_http adapter service for UI Navigator)
UI_EXECUTOR_PORT=8090
UI_EXECUTOR_DEFAULT_URL=https://example.com
UI_EXECUTOR_STRICT_PLAYWRIGHT=false
UI_EXECUTOR_SIMULATE_IF_UNAVAILABLE=true
UI_EXECUTOR_ACTION_TIMEOUT_MS=2500
UI_EXECUTOR_DEFAULT_DEVICE_NODE_ID=
UI_EXECUTOR_DEVICE_NODES_JSON=

# Demo Frontend
FRONTEND_PORT=3000

# Orchestrator
ORCHESTRATOR_PORT=8082
FIRESTORE_ENABLED=false
FIRESTORE_DATABASE=(default)
FIRESTORE_EVENT_RETENTION_DAYS=14
FIRESTORE_SESSION_RETENTION_DAYS=90
FIRESTORE_RUN_RETENTION_DAYS=30
FIRESTORE_NEGOTIATION_RETENTION_DAYS=365
FIRESTORE_STORY_ASSET_RETENTION_DAYS=30
ORCHESTRATOR_STORY_QUEUE_TELEMETRY_ENABLED=true
ORCHESTRATOR_STORY_QUEUE_TELEMETRY_POLL_MS=30000
ORCHESTRATOR_ASSISTIVE_ROUTER_ENABLED=false
ORCHESTRATOR_ASSISTIVE_ROUTER_MODEL=gemini-3-flash
ORCHESTRATOR_ASSISTIVE_ROUTER_API_KEY=
ORCHESTRATOR_ASSISTIVE_ROUTER_BASE_URL=https://generativelanguage.googleapis.com/v1beta
ORCHESTRATOR_ASSISTIVE_ROUTER_TIMEOUT_MS=2500
ORCHESTRATOR_ASSISTIVE_ROUTER_MIN_CONFIDENCE=0.75
ORCHESTRATOR_ASSISTIVE_ROUTER_ALLOW_INTENTS=conversation,translation,negotiation

# Model profiles (from requirements spec)
LIVE_MODEL_ID=gemini-live-2.5-flash-native-audio
FAST_MODEL_ID=gemini-3-flash
REASONING_MODEL_ID=gemini-3-pro

# Optional Gemini text generation endpoint (used by live-agent for translation/conversation)
GEMINI_API_KEY=
GEMINI_API_BASE_URL=https://generativelanguage.googleapis.com/v1beta
LIVE_AGENT_GEMINI_API_KEY=
LIVE_AGENT_TRANSLATION_MODEL=gemini-3-flash
LIVE_AGENT_CONVERSATION_MODEL=gemini-3-flash
LIVE_AGENT_USE_GEMINI_CHAT=true
LIVE_AGENT_GEMINI_TIMEOUT_MS=8000

# Storyteller agent
STORYTELLER_GEMINI_API_KEY=
STORYTELLER_PLANNER_MODEL=gemini-3-pro
STORYTELLER_BRANCH_MODEL=gemini-3-flash
STORYTELLER_IMAGE_MODEL=imagen-4
STORYTELLER_VIDEO_MODEL=veo-3.1
STORYTELLER_TTS_MODEL=gemini-tts
STORYTELLER_MEDIA_MODE=fallback
STORYTELLER_USE_GEMINI_PLANNER=true
STORYTELLER_GEMINI_TIMEOUT_MS=12000

# UI Navigator agent
UI_NAVIGATOR_GEMINI_API_KEY=
UI_NAVIGATOR_PLANNER_MODEL=gemini-3-pro-preview
UI_NAVIGATOR_USE_GEMINI_PLANNER=true
UI_NAVIGATOR_GEMINI_TIMEOUT_MS=10000
UI_NAVIGATOR_MAX_STEPS=8
UI_NAVIGATOR_APPROVAL_KEYWORDS=payment,pay,card,credential,password,delete,remove,transfer,wire,bank,purchase,submit order
UI_NAVIGATOR_EXECUTOR_MODE=simulated
UI_NAVIGATOR_EXECUTOR_URL=http://localhost:8090
UI_NAVIGATOR_REMOTE_HTTP_FALLBACK_MODE=simulated
UI_NAVIGATOR_DEVICE_NODE_INDEX_URL=
UI_NAVIGATOR_DEVICE_NODE_INDEX_AUTH_TOKEN=
UI_NAVIGATOR_DEVICE_NODE_INDEX_TIMEOUT_MS=2500
UI_NAVIGATOR_DEVICE_NODES_JSON=

# Skills runtime
SKILLS_RUNTIME_ENABLED=true
SKILLS_SOURCE_PRECEDENCE=workspace,bundled,managed
SKILLS_ALLOWED_SOURCES=workspace,bundled,managed
SKILLS_WORKSPACE_DIR=skills/workspace
SKILLS_BUNDLED_DIR=skills/bundled
SKILLS_MANAGED_INDEX_JSON=
SKILLS_MANAGED_INDEX_URL=
SKILLS_MANAGED_INDEX_AUTH_TOKEN=
SKILLS_MANAGED_INDEX_TIMEOUT_MS=2500
SKILLS_ENABLED_IDS=
SKILLS_DISABLED_IDS=
SKILLS_SECURITY_MODE=enforce
SKILLS_MIN_TRUST_LEVEL=untrusted

# Managed skill plugin marketplace signing
SKILL_PLUGIN_REQUIRE_SIGNATURE=false
SKILL_PLUGIN_SIGNING_KEYS_JSON=
